
// ********** Heartbeat animation **********
//INFO: use like this:
// animation: heartbeatAnimation 1.6s infinite;
// animation-timing-function: ease-in-out;
@keyframes heartbeatAnimation {
    0% {
        transform: scale(100%);
        fill: #ff3f3f;
    }
    35.84% {
        transform: scale(164.16%);
    }
    60.06% {
        transform: scale(80.06%);
        fill: #ff6363;
        fill: $gptBrandColor;
    }
    76.43% {
        transform: scale(133.57%);
        fill: #ff0000;
    }
    87.48% {
        transform: scale(87.48%);
    }
    94.95% {
        transform: scale(105.05%);
    }
    100.00% {
        transform: scale(100.00%);
        fill: #ff3f3f;
    }
}

// ********** Horizontal spinner animation **********
// INFO: Apply to a block-level node shell whenever we need a placeholder spinner
// https://cssloaders.github.io/
@mixin horizontalSpinnerAnimation($config: ()) {
    $defaults: (
        size: 1rem,
        color: #fff,
        fontSize: 7px,
        duration: 1000ms,
        easing: ease-in-out,
        delayStep: 1050ms,
        gap: 1rem,
        shadowOffset: -1.3em
    );
    $settings: map-merge($defaults, $config);

    $animName: unique-id();

    @keyframes #{$animName} {
        0%, 80%, 100% {
            box-shadow: 0 map-get($settings, size) 0 map-get($settings, shadowOffset);
        }
        40% {
            box-shadow: 0 map-get($settings, size) 0 0;
        }
    }

    position: relative;
    border-radius: 50%;
    width: map-get($settings, size);
    height: map-get($settings, size);
    color: map-get($settings, color);
    font-size: map-get($settings, fontSize);
    text-indent: -9999em;
    transform: translateZ(0);
    animation-fill-mode: both;
    animation: #{$animName} map-get($settings, duration) infinite map-get($settings, easing);
    animation-delay: -1 * map-get($settings, delayStep);

    &::before,
    &::after {
        content: '';
        position: absolute;
        top: 0;
        border-radius: 50%;
        width: map-get($settings, size);
        height: map-get($settings, size);
        animation-fill-mode: both;
        animation: #{$animName} map-get($settings, duration) infinite map-get($settings, easing);
    }

    &::before {
        left: -1 * map-get($settings, gap);
        animation-delay: -2 * map-get($settings, delayStep);
    }

    &::after {
        left: map-get($settings, gap);
        animation-delay: 0s;
    }
}

// ********** Click Feedback Animation **********
// INFO: Click feedback with color flash and single smooth wave
//
// SCSS Usage - Use the mixin with named parameters:
// @include clickToggleFeedbackAnimation((
//   startColor: $nightBlue,
//   flashColor: lighten($nightBlue, 15%),
//   endColor: lighten($nightBlue, 30%),
//   duration: 150ms,
//   easing: cubic-bezier(0.85, 0, 0.15, 1)
// ));
//
// JavaScript Usage - Toggle a temporary class to trigger the animation:
// element.classList.add('click-feedback');
// setTimeout(() => element.classList.remove('click-feedback'), 150); // Match duration
//
// Complete Example:
// SCSS:
//   .my-button {
//     svg { fill: $nightBlue; }
//
//     &.click-feedback svg {
//       @include clickToggleFeedbackAnimation((
//         startColor: $nightBlue,
//         flashColor: lighten($nightBlue, 15%),
//         endColor: lighten($nightBlue, 30%)
//       ));
//     }
//   }
//
// JS:
//   button.addEventListener('click', () => {
//     button.classList.add('click-feedback');
//     setTimeout(() => button.classList.remove('click-feedback'), 150);
//   });
//
@mixin clickToggleFeedbackAnimation($config: ()) {
    $defaults: (
        startColor: inherit,
        flashColor: inherit,
        endColor: inherit,
        duration: 150ms,
        easing: cubic-bezier(0.85, 0, 0.15, 1),
        squeezeScale: 0.88
    );
    $s: map-merge($defaults, $config);

    $animName: unique-id();

    @keyframes #{$animName} {
        0% {
            transform: scale(1);
            fill: map-get($s, startColor);
        }
        50% {
            transform: scale(map-get($s, squeezeScale));
            fill: map-get($s, flashColor);
        }
        100% {
            transform: scale(1);
            fill: map-get($s, endColor);
        }
    }

    animation: $animName map-get($s, duration) map-get($s, easing);
}

// ********** PopOut animation **********
// INFO: use like this:
// animation: popOut 400ms cubic-bezier(0.19, 1, 0.22, 1);
@keyframes popOut {
    from { transform: scale(0); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

@keyframes popOutAndGrow {
    from { transform: scale(0); opacity: 0; height: 0; }
    to { transform: scale(1); opacity: 1; height: 100%; }
}
