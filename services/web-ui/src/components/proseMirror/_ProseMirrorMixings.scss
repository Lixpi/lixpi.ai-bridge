
@mixin boundaryPointerTriangle($config: ()) {
    $defaults: (
        direction: 'right',
        anchor: 'bottom',
        horizontalOffset: 4px,
        verticalOffset: 16px,
        size: 4px,
        color: #ff8844,
        accentColor: null
    );

    $settings: map-merge($defaults, $config);

    $direction: map-get($settings, direction);
    $horizontalOffset: map-get($settings, horizontalOffset);
    $verticalOffset: map-get($settings, verticalOffset);
    $size: map-get($settings, size);
    $color: map-get($settings, color);
    $accentColor: map-get($settings, accentColor);
    $anchor: map-get($settings, anchor);

    &:after {
        content: "";
        position: absolute;
        border: $size solid transparent;

        @if $anchor == 'top' {
            top: $verticalOffset;
        } @else {
            bottom: $verticalOffset;
        }

        @if $direction == 'right' {
            left: 100%;
            margin-left: $horizontalOffset;
            border-left-color: $color;
        } @else if $direction == 'left' {
            right: 100%;
            margin-right: $horizontalOffset;
            border-right-color: $color;
        }
    }

    @if $accentColor {
        &:before {
            content: "";
            position: absolute;
            border: ($size + 2px) solid transparent;
            z-index: -1;

            @if $anchor == 'top' {
                top: $verticalOffset - 2px;
            } @else {
                bottom: $verticalOffset - 2px;
            }

            @if $direction == 'right' {
                left: 100%;
                margin-left: $horizontalOffset;
                border-left-color: $accentColor;
            } @else if $direction == 'left' {
                right: 100%;
                margin-right: $horizontalOffset;
                border-right-color: $accentColor;
            }
        }
    }
}

// Speech bubble tail mixin - creates a curved tail like in modern messaging apps
// Uses SVG mask technique so it works on any background (including gradients)
@mixin speechBubbleTail($config: ()) {
    $defaults: (
        position: 'right',          // 'left' or 'right' - which side the tail appears
        bubbleColor: #e5e5ea,       // background color of the bubble
    );

    $settings: map-merge($defaults, $config);

    $position: map-get($settings, position);
    $bubbleColor: map-get($settings, bubbleColor);

    position: relative;
    overflow: visible;

    // The tail is a small curved hook at the bottom corner
    // Uses clip-path for the curved shape - no background color dependency
    &::after {
        content: "";
        position: absolute;
        bottom: 0;
        width: 12px;
        height: 11px;
        background-color: $bubbleColor;

        @if $position == 'right' {
            right: -7px;
            // Curved tail shape using clip-path polygon with smooth curve simulation
            // The shape: starts wide at top (connects to bubble), curves to a point at bottom-right
            clip-path: path('M 0 0 L 0 6.5 C 0 9.5 5 11 12 11 C 8.5 10 7.5 8.5 6.5 6.5 C 5.5 4.5 3 2 0 0 Z');
        } @else {
            left: -7px;
            // Mirrored for left side
            clip-path: path('M 12 0 L 12 6.5 C 12 9.5 7 11 0 11 C 3.5 10 4.5 8.5 5.5 6.5 C 6.5 4.5 9 2 12 0 Z');
        }
    }
}